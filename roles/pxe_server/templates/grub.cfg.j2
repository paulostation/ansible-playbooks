# GRUB Network Boot Menu
# Managed by Ansible - do not edit manually

set timeout={{ (pxe_menu_timeout | default(300)) // 10 }}
set default=0

{% for name, image in pxe_boot_images.items() if image.enabled | default(false) %}
{% if image.nfs_boot | default(false) and nfs_enabled | default(false) %}
menuentry "{{ image.label }} (NFS - low RAM)" {
    linux (http,{{ pxe_server_ip }})/{{ image.kernel }} {{ image.append | default('') }} archiso_nfs_srv={{ pxe_server_ip }}:{{ http_root }}/{{ name }} ip=dhcp
    initrd (http,{{ pxe_server_ip }})/{{ image.initrd }}
}

menuentry "{{ image.label }} (HTTP - high RAM)" {
    linux (http,{{ pxe_server_ip }})/{{ image.kernel }} {{ image.append | default('') }} ip=dhcp
    initrd (http,{{ pxe_server_ip }})/{{ image.initrd }}
}
{% else %}
menuentry "{{ image.label }}" {
    linux (http,{{ pxe_server_ip }})/{{ image.kernel }} {{ image.append | default('') }} ip=dhcp
    initrd (http,{{ pxe_server_ip }})/{{ image.initrd }}
}
{% endif %}

{% endfor %}
menuentry "Boot from local disk" {
    exit
}
